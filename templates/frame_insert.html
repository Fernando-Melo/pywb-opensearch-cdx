<!DOCTYPE html>
<html>
<head>	
<style>
html, body
{
  height: 100%;
  margin: 0px;
  padding: 0px;
  border: 0px;
  overflow: hidden;
}

</style>

<script type="text/javascript">
sideMenuVersion = false;

var tokens = "{{ wbrequest.wb_prefix }}".split('\/');
//dirty hack to get the path without the name of the collection e.g http://arquivo.pt/pywb/replay/  --> http://arquivo.pt/pywb/
//testing...
pathWithoutCollectionName = "";
for (i = 0; i < tokens.length-2; i++) {
  pathWithoutCollectionName+= tokens[i] + "\/";
}
</script>

<script type="text/javascript">
document.write("<script src="+ pathWithoutCollectionName+"static\/resources\/dependencies\/js.cookie.js"+ "><\/script>");
</script> <!-- Plugin for cookie to choose language-->

<script>
	var language = Cookies.get('language');
	if( language == 'EN'){
		document.write('<script type="text/javascript" language="JavaScript" src="'+pathWithoutCollectionName+'static/resources/properties/ConstantsEN.js"><\/script>');
	}
	else{
		document.write('<script type="text/javascript" language="JavaScript" src="'+pathWithoutCollectionName+'static/resources/properties/ConstantsPT.js"><\/script>');
	}
</script>

<!-- Facebook js  
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.async=true; js.src = "//connect.facebook.net/pt_PT/sdk.js#xfbml=1&version=v2.5&appId=551460401678551";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
-->


<!-- Twitter js -->
<script>window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);
 
  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };
 
  return t;
}(document, "script", "twitter-wjs"));
</script>
<!--
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.async=true; js.src = "//connect.facebook.net/pt_PT/sdk.js#xfbml=1&version=v2.5&appId=551460401678551";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
-->
<!-- Twitter js -->
<script>
function setLang(lang) {
	if(lang == 'EN')
	 {
		Cookies.set('language', 'EN', { expires: 30, path: '/', domain: 'p27.arquivo.pt'  });
	 }
	else //default language Portuguese
	{
		Cookies.set('language', 'PT', { expires: 30, path: '/', domain: 'p27.arquivo.pt'  });	
	}
	
	top.alert('lingua:  ' + Cookies.get('language'));
}
</script>

<script>
</script>

<script>
/*function printIframe() {
			//$('#divPrintMe').show();
            //var frm = document.getElementById("divPrintMe").contentWindow;
            //frm.focus();// focus on contentWindow is needed on some ie versions
            //frm.print();
            top.alert("old");
}*/
</script>

<script type="text/javascript">
function jumpToVersion (url, ts){
	var frameSrc = "{{ wbrequest.wb_prefix }}" + ts + 'mp_/' + url; 
	$('#replay_iframe').attr('src', frameSrc);
	sideMenuVersion = true; // TODO:: improve this Dirty hack global var to define a leftMenu version and preserve leftMenu state
}
</script>


<script>
function createVersion(timestamp, url)
//add version with timestamp to the left side menu
{
	//$("#versionUrlUpdate").attr("href", "http://p27.arquivo.pt:8282/replay/"+ timestamp+ "/"+url);
	if (timestamp.length < 14) {
		//TODO: add some error message when timestamp is wrong?
		//TODO: REMOVE ALERT?
		//top.alert("Timestamp Error: Invalid Timestamp "+ timestamp);
	}
	else{
    		var year = timestamp.substring(0, 4);
    		var month = timestamp.substring(4, 6);
    		var day = timestamp.substring(6, 8);
		var hours = timestamp.substring(8, 10);
                var minutes = timestamp.substring(10, 12);

		if ($('#'+year).length){
			//year already exists 
			if($('#'+year+'_'+month).length){
				
				if($('#'+year+'_'+month+'_'+day).length){
				//if day, month and year already exist	
								  $('#'+'ul_'+year+'_'+month+'_'+day).append(	
										    '<li style="list-style: none;" id = "'+timestamp+'">'
								  +                 		'<span class="document">'
								  +								'<a href="javascript:jumpToVersion(\''+url+'\', \''+timestamp+'\')" title="'+year+' '+month + ' ' + day +'" id = "a_'+timestamp+'">'+hours+':'+minutes+'</a>'
								  +							'</span>'
								  +                 '</li>');						
				}
				else{
				//if the month and year already exist
								  $('#'+'ul_'+year+'_'+month).append(
								                   '<li style="list-style: none;"><a id ="'+year+'_'+month+'_'+day+'" href="#" class="dayHover">'+day+'</a>'
								  +						'<ul id = "ul_'+year+'_'+month+'_'+day+'" style="list-style: none; padding: 0; margin: 0; display: none;">'
								  +							'<li style="list-style: none;" id = "'+timestamp+'">'
								  +                 		'<span class="document">'
								  +								'<a href="javascript:jumpToVersion(\''+url+'\', \''+timestamp+'\')" title="'+year+' '+month + ' ' + day +'" id = "a_'+timestamp+'">'+hours+':'+minutes+'</a>'
								  +							'</span></li>'
								  +                     '</ul>'
								  +                 '</li>');				

				}

			}
			else{
				//year already exists, add the month 
				$('#'+'ul_'+year).append(
								  			'<li style="list-style: none;"><a id ="'+year+'_'+month+'" href="#" class="monthHover" >'+Content.months[month]+'</a>'
								  +				'<ul id = "ul_'+year+'_'+month+'"  style="list-style: none; margin: 0; display: none;">'
								  +                 '<li style="list-style: none;"><a id ="'+year+'_'+month+'_'+day+'" href="#" class="dayHover">'+day+'</a>'
								  +						'<ul id = "ul_'+year+'_'+month+'_'+day+'"  style="list-style: none; padding: 0; margin: 0; display: none;">'
								  +							'<li style="list-style: none;" id = "'+timestamp+'">'
								  +                 		'<span class="document">'
								  +								'<a href="javascript:jumpToVersion(\''+url+'\', \''+timestamp+'\')" title="'+year+' '+month + ' ' + day +'" id = "a_'+timestamp+'">'+hours+':'+minutes+'</a>'
								  +							'</span></li>'
								  +                     '</ul>'
								  +                 '</li>'
								  +				'</ul>'
								  +     	'</li>');				

			}
		}		
		
		else{	
			$("#yearList").append(
									'<li id="toplist">'
								  + 	'<a href="#" id = "'+year+'" class = "yearHover">' + year +'</a>'
								  + 	'<ul id ="ul_'+year+'" style="list-style: none; display: none;" >'
								  +			'<li style="list-style: none;"><a id ="'+year+'_'+month+'" href="#" class="monthHover" >'+Content.months[month]+'</a>'
								  +				'<ul id = "ul_'+year+'_'+month+'"  style="list-style: none; margin: 0; display: none;">'
								  +                 '<li style="list-style: none;"><a id ="'+year+'_'+month+'_'+day+'" href="#" class="dayHover" >'+day+'</a>'
								  +						'<ul id = "ul_'+year+'_'+month+'_'+day+'"  style="list-style: none; padding: 0; margin: 0; display: none;">'
								  +							'<li style="list-style: none;" id = "'+timestamp+'">'
								  +                 		'<span class="document">'
								  +								'<a href="javascript:jumpToVersion(\''+url+'\', \''+timestamp+'\')" title="'+year+' '+month + ' ' + day +'" id = "a_'+timestamp+'">'+hours+':'+minutes+'</a>'
								  +							'</span></li>'
								  +                     '</ul>'
								  +                 '</li>'
								  +				'</ul>'
								  +     	'</li>'
								  +	   '</ul>'
								  + '</li>');
			$("#toplist").css('list-style','none');


		}


	}

	if(ts == timestamp){  //leave the current version open in the side menu

		$('#'+year).addClass('activeItem');
		$('#'+year+'_'+month).addClass('activeItem');
		$('#'+year+'_'+month+'_'+day).addClass('activeItem');

		$('#ul_'+year).addClass('open');
		$('#ul_'+year+'_'+month).addClass('open');
		$('#ul_'+year+'_'+month+'_'+day).addClass('open');


		$('#ul_'+year).css('list-style','none'); $('#ul_'+year).css('display','block');
		$('#ul_'+year+'_'+month).css('list-style','none'); $('#ul_'+year+'_'+month).css('display','block');
		$('#ul_'+year+'_'+month+'_'+day).css('list-style','none'); $('#ul_'+year+'_'+month+'_'+day).css('display','block');
		$('#a_'+timestamp).css('font-style','italic');

	}
		
}
</script>

<script>
function updateVersionsOfUrl(cleanurl)
{
/* Uses jquery to make an ajax get request to the Cdx-server api in order to retrieve the list of versions for a specific url */
var urlsource = cleanurl;
var timestamp1;
var url1;

var requestURL = pathWithoutCollectionName+"replay-cdx"

$.ajax({
// example request to the cdx-server api - 'http://arquivo.pt/pywb/replay-cdx?url=http://www.sapo.pt/index.html&output=json&fl=url,timestamp'
   url: requestURL,
   data: {
      output: 'json',
      url: urlsource,
      fl: 'url,timestamp'
   },
   error: function() {
     //top.alert('error: ' + urlsource);
   },
   dataType: 'text',
   success: function(data) {
	$("#yearList").empty();
	$.each(data.split('\n'), function(e){
		if(this != ""){
			var version = jQuery.parseJSON(this);
			createVersion(version.timestamp, version.url); 
		}
		
	}); 

   },
   type: 'GET'
});



}
</script>

<script>
function getImageToPrint(encodedURLToPrint)
{
	var requestURL = "{{ wbrequest.user_metadata.search_location }}/print/";
	//top.alert(requestURL);
	$.ajax({
	// example request to the cdx-server api - 'http://arquivo.pt/print/?url='
	   url: requestURL,
	   data: {
	      url: encodedURLToPrint
	   },
	   error: function() {
	     top.alert('error: ' + requestURL);
	   },
	   dataType: 'text',
	   success: function(data) {
	   		var theImage = jQuery.parseJSON(data);
			
			$('#divPrintMe').show();
			if($('#imgToPrint').length){ //if 2nd time user prints only update the image
				$('#imgToPrint').attr('src','data:image/png;base64,'+theImage.imgBase64);
			}
			else{
				$('#divPrintMe').append('<img id="imgToPrint" style="display: block;" width=600px src="data:image/png;base64,'+ theImage.imgBase64 + '"/>');					
			}
			window.print();
			$('#divPrintMe').hide();

	   },
	   type: 'GET'
	});


}
</script>

<script>
function ts_to_daymonthyearFormated(ts)
{
/* Processes timestamp 20141005000000 and returns 05 November, 2014 */
    if (ts.length < 14) {
        return ts; //maybe return some error for incorrect timestamps
    }
    var ano = ts.substring(0, 4);
    var mes = ts.substring(4, 6);
    var dia = ts.substring(6, 8);
    if(dia.substring(0,1) == '0')
	dia = dia[1]; //remove the 0 in the day just for presentation purposes
    return dia + " " + Content.months[mes] + ", " + ano
}
</script>

<script>
function ts_to_date(ts, is_gmt)
{
    if (ts.length < 14) {
        return ts;
    }

    var datestr = (ts.substring(0, 4) + "-" +
                  ts.substring(4, 6) + "-" +
                  ts.substring(6, 8) + "T" +
                  ts.substring(8, 10) + ":" +
                  ts.substring(10, 12) + ":" +
                  ts.substring(12, 14) + "-00:00");

    var date = new Date(datestr);
    if (is_gmt) {
        return date.toGMTString();
    } else {
        return date.toLocaleString();
    }
}
</script>

<script>
function ts_to_hoursminutes(ts)
/* Processes timestamp 20141005155802 and returns 15:58  */
{
    if (ts.length < 14) {
        return ts;
    }
    var hours = ts.substring(8, 10);
    var minutes = ts.substring(10, 12);
    return hours + ":" + minutes
}
</script>

<script>
/*Truncates large URL in the replay bar*/
function truncateUrl(url)
{	
	if (url.length > 80){
		return url.substring(0,77) + "..."
	}
	else
		return url
}
</script>

<script>
  wbinfo = {}
  wbinfo.prefix = "{{ wbrequest.wb_prefix }}";
  wbinfo.capture_url = "{{ url }}";
  wbinfo.timestamp = "{{ wbrequest.wb_url.timestamp }}";
  ts = wbinfo.timestamp; //TODO:: maybe in the future remove this variable and use only the above
  wbinfo.is_frame = true;
  wbinfo.frame_mod = "{{ wbrequest.options.frame_mod }}";
  wbinfo.replay_mod = "{{ wbrequest.options.replay_mod }}";
</script>

<script type="text/javascript">
	document.write("<script src="+ pathWithoutCollectionName+"{{ static_path }}/wb.js"+ "><\/script>");
	document.write("<link rel='stylesheet' href ='"+ pathWithoutCollectionName+"{{ static_path }}/wb.css'"+ "\/>");
	document.write("<script src="+ pathWithoutCollectionName+"{{ static_path }}/wb_frame.js"+ "><\/script>");
</script> 

{% include banner_html ignore missing %}

<!-- Overwriting pywb set_state function in order to properly update our toolbar when iframe changes-->
<script>
function set_state(state) {
    // current url
    url = state.url;
    var truncatedUrl = truncateUrl(url);
    $("#update1").text(truncatedUrl);
    $("#update2").text(truncatedUrl); 

    //update the link to be sent in the email
    $("#sendEmail").attr('href', 'mailto:?subject='+Content.emailMessage+ ' [sub]');

    //update link to list all versions of url in arquivo
    //document.getElementById("historyBack").setAttribute("href","{{ wbrequest.user_metadata.search_location }}/search.jsp?l="+Content.language+"&query="+ url + "&btnSubmit=Pesquisar");
    // current timestamp
    ts = state.timestamp; //global variable timestamp

	//TODO:: Update the URL to generate screenshots
	
	var urlEncoded = encodeURIComponent('{{ wbrequest.user_metadata.search_location }}/noFrame/replay/'+ts+'/'+url)
    $('#a_screenshot').attr('href', '{{ wbrequest.user_metadata.search_location }}/screenshot/?url='+urlEncoded);

    $('#a_print').attr('href','javascript:getImageToPrint("'+urlEncoded+'")'); //TODO:: Check This

    //$('#a_reconstruct').attr('href', 'http://timetravel.mementoweb.org/reconstruct/'+ts+'/'+url);

   // addthis.update('share', 'url', '{{wbrequest.wb_prefix}}'+ts+'/'+url); 
    //addthis.url = '{{wbrequest.wb_prefix}}'+ts+'/'+url; 

	//addthis_share = {url:"http://www.google.pt"};
	//addthis.url = "http://yahoo.com";
	//addthis.toolbox(".addthis_toolbox");

	theurl= '{{wbrequest.wb_prefix}}'+ts+'/'+url;
	addthis.update('share', 'url', theurl);


    var title = $("#replay_iframe").contents().find("meta[property='og:title']").attr("content");
    if(title === undefined || title === null) // there is no og:title meta tag in this iframe
 	{
    	title = $("#replay_iframe").contents().find("title").html(); //search for a title tag in the iframe
	    if (!title.length){ //there is no title
	    	//top.alert("No title");
	    	title = "arquivo.pt";
	    }
	}
	addthis.update('share', 'title', title);
	addthis.toolbox('.addthis_toolbox', addthis_config, addthis_share);
	$('meta[property="og:url"]').attr('content', theurl);




//top.alert(addthis.url);

    $("#data2").html(ts_to_daymonthyearFormated(ts) + "&nbsp;<span id=\"at2\" class=\"as\">"+Content.at+"</span>&nbsp;" + ts_to_hoursminutes(ts));
    //document.getElementById("versionsTable").setAttribute("href","{{ wbrequest.user_metadata.search_location }}/search.jsp?l="+Content.language+"&query="+ url + "&btnSubmit=Pesquisar");

    $("#data1").html(ts_to_daymonthyearFormated(ts) + "&nbsp;<span id=\"at1\" class=\"as\">"+Content.at+"</span>&nbsp;" + ts_to_hoursminutes(ts));
  //  addthis.update('share', 'title', Content.shareMessage); //TODO: think about share message maybe with original title of the webpage?

    //List the versions of current url in the side bar
    	 
    if(sideMenuVersion != true){ // TODO:: improve this Dirty hack global var to define a leftMenu version and preserve leftMenu state
    	updateVersionsOfUrl(url);
	}
	sideMenuVersion =false;
    //the following code is the original code of pywb...
    var capture_info = document.getElementById("_wb_capture_info");
    if (capture_info) {
        capture_info.innerHTML = state.capture_str;
    }

    var label = document.getElementById("_wb_label");
    if (label) {
        if (state.is_live) {
            label.innerHTML = _wb_js.banner_labels.LIVE_MSG;
        } else {
            label.innerHTML = _wb_js.banner_labels.REPLAY_MSG;
        }
    }

    curr_state = state;
}
</script>
<!--end pywb changes -->


<!-- head of the barra -->
		<title>Arquivo.pt</title>
<!-- facebook share configs 
		<meta property="og:url"           content="location.href" /> -->
<!--		
		<meta property="og:type"          content="website" />
		<meta property="og:title"         content="Arquivo.pt" />
		<meta property="og:description"   content="Arquivo.pt - pesquise páginas do passado" />
		<meta property="og:image"         content="http://arquivo.pt/img/logo-home-pt.png" />
-->		
<!-- end of facebook configs -->
        <meta property="og:url"           content="location.href" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta http-equiv="Content-Language" content="pt-PT">
		<meta http-equiv="Content-Script-Type" content="text/javascript">
		<meta http-equiv="Content-Style-Type" content="text/css">	
		<meta name="Keywords" content="Arquivo.pt">
		<meta name="Description" content="Pesquise páginas do passado">

		<script type="text/javascript">
				document.write("<link rel='stylesheet' title='Estilo principal' type='text/css' href ='"+ pathWithoutCollectionName+"static/resources/barra_ficheiros/style.css'"+ "\/>");
				document.write("<script src="+ pathWithoutCollectionName+"static/resources/dependencies/jquery-latest.min.js"+ "><\/script>");
		</script>
		<script type="text/javascript">
			$(document).ready(function() {
				var language = Cookies.get('language');
				var url = window.location;  
    				$('#fb-share-button').attr('data-href', url);

				if ($('#slidedown_menu').length) {
					$('#slidedown_menu ul ul').hide();
				}

				$(document).on('click', '#yearList > li > a, #yearList > li > ul > li > a, #yearList > li > ul > li > ul > li > a', function() {
					if ($(this).next().hasClass('open')) {
						$(this).removeClass('activeItem');
						$(this).next().slideUp('fast').removeClass('open');
						$(this).parent().css('list-style','none');						
					} else {
						$(this).addClass('activeItem');
						$(this).next().slideDown('fast').addClass('open');
						$(this).parent().css('list-style','none');
						$(this).parent().off('hover');	
						$(this).off('hover');
					}
					return false;
				});

				$(".barra-expandir").click(function() {
					$("#barra").hide();
					$("#barra-expandida").show();
					$("#barra-esquerda").show();
					maximizar();

					return false;
				});

				$("#minimizar").click(function() {
					$("#barra-expandida").hide();
					$("#barra-esquerda").hide();
					$("#barra").show();
					$("#wb_iframe_div").removeClass("wb_iframe_div-min");
					$("#wb_iframe_div").addClass("wb_iframe_div");
					$("#replay_iframe").parent().css('padding-left','0');
					$("#replay_iframe").width($(document).width());
					$("#replay_iframe").height($(window).height() - 35);
					return false
				});

				$(window).resize(function() {
					if($("#barra-esquerda").css('display') == 'block') {
						$("#replay_iframe").width($(window).width() - 161);
						$("#replay_iframe").height($(window).height() - 61);
						$(".sombra-exp-1").width($(document).width() - 161);
						$(".sombra-exp-2").height($(window).height() - 50);
					}
					else {
						$("#replay_iframe").width($(window).width());
						$("#replay_iframe").height($(window).height() - 34);
						$(".sombra-exp-1").width($(document).width());
					}
				});
				if($("#barra-esquerda").css('display') == 'block') {
					maximizar();
				}

				function maximizar() {
					$("#replay_iframe").width($(window).width() - 161);
					$("#replay_iframe").parent().css({'padding-left' : '156px'});
					$("#replay_iframe").height($(window).height() - 61);
					$(".sombra-exp-1").width($(document).width() - 161);
					$(".sombra-exp-2").height($(window).height() - 50);
				}
			});
		</script>
		<script type="text/javascript">
				document.write("<script src="+ pathWithoutCollectionName+"static/resources/barra_ficheiros/slidedown-menu.html"+ "><\/script>");
		</script>
<!-- end of the head of barra -->
</head>
<body style="margin: 0px; padding: 0px;">
<script type="text/javascript">
var addthis_config = addthis_config||{};
    addthis_config.data_track_addressbar = false;
    addthis_config.data_track_clickback = false;
</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5645cdb2e22ca317" async="async"></script>	
<!-- beggining div barra -->
		<div id="barra" style="display: none;" class="noprint" >
			<script type="text/javascript">
				document.write('<img src="'+pathWithoutCollectionName+'static/resources/barra_ficheiros/logo.png" alt="Arquivo da Web Portuguesa" height="13" border="0" width="18"\/>');
			</script>

			<div id = "update1" class="noprint">
				<script type="text/javascript">
					document.write(truncateUrl("{{url}}"))
				</script>	
			</div>
			<div class="barra-expandir" class="noprint">
				<a href="http://www.wingmanid.com/arquivo-pt/expandir" class="expandir" id="moreOptions"><script>document.write(Content.moreOptions)</script></a>
				<script type="text/javascript">
							document.write("<img src='"+ pathWithoutCollectionName+"static/resources/barra_ficheiros/expandir.png' alt='' class='expandir-img' height='15' border='0' width='15'"+ "\/>");					
				</script>				
			</div>
			<span class="data" id = "data1"><script>document.write(ts_to_daymonthyearFormated("{{ wbrequest.wb_url.timestamp }}"))</script>&nbsp;<span id="at1" class="as"><script>document.write(Content.at)</script></span>&nbsp;<script>document.write(ts_to_hoursminutes("{{ wbrequest.wb_url.timestamp }}"))</script></span>
			<div class="sombra noprint" >&nbsp;</div>
		</div>
		<div id="barra-expandida" style="display: block;" class="noprint">
			<div id="esquerda" class="noprint">
				<div id = "esquerda-logo" class="noprint"> 
					<a id="logoA" href= "" >
						<img src="http://arquivo.pt/img/logo-pt.png" alt="Arquivo da Web Portuguesa" class="logo" height="60" border="0"/>
					</a>
						<script>$('#logoA').attr('href',"{{ wbrequest.user_metadata.search_location }}/?l="+Content.language );
						</script>					
				</div>
				<div id="info-expandida" class="noprint">
					<div id = "update2" class="noprint"> 
						<script type="text/javascript">
							document.write(truncateUrl("{{url}}"))
						</script>
					</div>
					<span class="data" id = "data2"><script>document.write(ts_to_daymonthyearFormated("{{ wbrequest.wb_url.timestamp }}"))</script>&nbsp;<span id="at2" class="as"><script>document.write(Content.at)</script></span>&nbsp;<script>document.write(ts_to_hoursminutes("{{ wbrequest.wb_url.timestamp }}"))</script> 
				</div>
			</div>
			<div style="width: 1119px;" class="sombra-exp-1 noprint">&nbsp;</div>

			<div id="direita" class="noprint">
			<!--	<div style="height: 858px;" class="sombra-exp-2">&nbsp;</div> -->
				<ul style="overflow:hidden">

					<SCRIPT TYPE="text/javascript">
							document.write("<li id='screenshot'><a id='a_screenshot' href=''><img src='"+ pathWithoutCollectionName+"static/resources/barra_ficheiros/expdble-imagem.png' alt='' height='20' border='0'"+ "\/><\/a><\/li>");
					</SCRIPT>
					<SCRIPT TYPE="text/javascript">
				   			var urlEncoded = encodeURIComponent('{{ wbrequest.user_metadata.search_location }}/noFrame/replay/{{ wbrequest.wb_url.timestamp }}/{{url}}');					
							document.write("<li><a id='a_print' href='javascript:getImageToPrint(\""+urlEncoded+"\")'><img src='"+ pathWithoutCollectionName+"static/resources/barra_ficheiros/print-icon2.png' alt='' height='20' border='0'"+ "\/><\/a><\/li>");
					</SCRIPT>

					<script>
						   var urlEncoded = encodeURIComponent('{{ wbrequest.user_metadata.search_location }}/noFrame/replay/{{ wbrequest.wb_url.timestamp }}/{{url}}');
						   $('#a_screenshot').attr('href', '{{ wbrequest.user_metadata.search_location }}/screenshot/?url='+urlEncoded);
						   $('#a_print').attr('href','javascript:getImageToPrint("'+urlEncoded+'")'); //TODO check for a better way to do this
					</script>						
					<!--
					<SCRIPT TYPE="text/javascript">
							document.write("<li id='memento_reconstruct'><a id='a_reconstruct' href=''><img src='"+ pathWithoutCollectionName+"static/resources/barra_ficheiros/timetravel_logo.png' alt='' height='20' border='0'"+ "\/><\/a><\/li>");
					</SCRIPT>
					<script>
						$('#a_reconstruct').attr('href', 'http://timetravel.mementoweb.org/reconstruct/{{ wbrequest.wb_url.timestamp }}/{{url}}');
					</script>
					-->

					<li class="ul-espaco"></li>

					<SCRIPT TYPE="text/javascript">

							var addthis_share = {
							   url: "http://www.tvi24.iol.pt/internacional/praias/praia-portuguesa-entre-as-melhores-do-mundo",
							}

							document.write("<li id='facebook_share'><a class='addthis_button_facebook'><img src='"+ pathWithoutCollectionName+"static/resources/barra_ficheiros/fb2.png' alt='' height='20' border='0'"+ "\/><\/a><\/li>");
					</SCRIPT>	
					<SCRIPT TYPE="text/javascript">
							document.write("<li><a class='addthis_button_twitter'><img src='"+ pathWithoutCollectionName+"static/resources/barra_ficheiros/twitter.png' alt='' height='20' border='0'"+ "\/><\/a><\/li>");
					</SCRIPT>	
					<script>document.write('<li class="email" id="liEmail"><a id="sendEmail" href="mailto:?subject= '+Content.emailMessage+' [sub]" onclick="this.href = this.href.replace(\'[sub]\',window.location)"><img src="'+pathWithoutCollectionName+'static/resources/barra_ficheiros/expdble-email.png" alt="" height="20" border="0" width="27"\/><\/a><\/li>');
					</script>
																				
					<li class="ul-espaco"><a id="help" href="" title=""><script>document.write(Content.help)</script></a></li><script>$('#help').attr('href', Content.helpHref); $('#help').attr('title',Content.help);</script>
					<!--<li><a href="javascript:setLang('PT')">PT</a></li>
					<li><a href="javascript:setLang('EN')">EN</a></li> -->
				</ul>
				<div id="minimizar" class="noprint">
					<script type="text/javascript">
							document.write("<img src='"+ pathWithoutCollectionName+"static/resources/barra_ficheiros/expdble-expandir.png' alt='' height='25' border='0' width='25'"+ "\/>");					
					</script>
					<a href="http://www.wingmanid.com/arquivo-pt/minimizar" id="lessOptions"><script>document.write(Content.lessOptions)</script></a>
					<div id="barra-expandida-direita" class="noprint">&nbsp;</div>
				</div>
			</div>
		</div>
		<div id="bottom" class="noprint">
			<div id="barra-esquerda" class="noprint">
				<!--<div id="navegacao">
					
					<span class="nova-pesquisa">
						<a id="newSearch" href=""><img src="{{ wbrequest.host_prefix }}/static/resources/barra_ficheiros/expdble-lupa.png" alt="" height="19" border="0" width="19"/>&nbsp;&nbsp; <script>document.write(Content.newSearch);$('#newSearch').attr('alt',Content.newSearch);$('#newSearch').attr('href','{{ wbrequest.user_metadata.search_location }}?l='+Content.language);</script></a>
					</span>
				

					<span class="voltar-historico">
						<a href="javascript:void()" id= "historyBack" ><img src="{{ wbrequest.host_prefix }}/static/resources/barra_ficheiros/expdble-seta-e.png" alt="Voltar ao Histórico" height="22" border="0" width="13">&nbsp; &nbsp; <script>document.write(Content.otherDates);</script></a>
<script>
   document.getElementById("historyBack").setAttribute("href","{{ wbrequest.user_metadata.search_location }}/search.jsp?l="+Content.language+"&query="+ "{{ url }}" + "&btnSubmit=Pesquisar");
</script>
					</span>

				</div> -->
				<div id="historico" class="noprint">
					<a id="versionsTable" href="">
						<script>document.write(Content.otherDates); document.getElementById("versionsTable").setAttribute("href","{{ wbrequest.user_metadata.search_location }}/search.jsp?l="+Content.language+"&query="+ "{{ url }}" + "&btnSubmit=Pesquisar");
						</script>
					</a></span>
					<div id="slidedown_menu" class="noprint">
						<ul id = "yearList" style=" list-style: none;">

						</ul>
					</div>
					<!-- END OF MENU -->
				</div>
			</div>
			<script>
				updateVersionsOfUrl('{{url}}')
			</script>



<div style="padding-left: 156px; padding: 0px 4px 4px 0px" id="wb_iframe_div" class="wb_iframe_div noprint">

<iframe style="width: 1119px; height: 847px; border-left:none; border-right:none; border-bottom:none; border-top: 2px solid #7F8081;" name="replay_iframe" id="replay_iframe" src="{{ wbrequest.wb_prefix + embed_url }}" onload=" iframe_loaded(event);" seamless="seamless" frameborder="0" scrolling="yes" class="wb_iframe noprint" target="_parent">

<script>
window.onunload = function() {
    // Notify top window of the unload event
    window.top.postMessage('iframe_change', '*');
};
</script>

</iframe>

</div>			
		</div>

<script type="text/javascript">
	document.write('<div class="printIframe" id="divPrintMe" style="display: block;"></div>' );
</script>		
		 <!-- end div barra -->
</body>
</html>
